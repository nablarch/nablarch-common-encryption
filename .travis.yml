language: java
branches:
  only:
  - master
  - develop
before_install:
- chmod +x gradlew
install: true
cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
script:
- git clone -b master https://github.com/nablarch/nablarch-ci-script.git $HOME/build-script/
  && chmod +x $HOME/build-script/travis-ci/*.sh
- $HOME/build-script/travis-ci/install-oracle-jdk6.sh
- $HOME/build-script/travis-ci/nablarch-build.sh
- $HOME/build-script/travis-ci/upload-test-report.sh
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
notifications:
  slack:
    secure: qsM5BSq1HyNvRtr4opN/5odMw0n2/n43xb5Q4u9isJh7aNXaZbkcBYJt74GxBokpRFEcOI+aS83KXp0+zjWDVHGiFwYtNv4+hu7ugHiRSJCzrEjSPvvA6BZQUaThBtm0A4kuJ7bZOzDkB/XwuAdi5ysBdISE1mCvyAbqMBlRuJj1H4YLgwIoTEWl5npC/y5IcIdOxBvnh+9dKeXI1Zc/9n5oe7gsox3RkHzGLAeWy/XrnyuDkhA5lVm0pY684tcbuKIOeVt7LgnoOMpVC+XW1bx3mhoLTGnb85xjzPLhqK7m2GSkZIEu9GqSy32G/N+aNnZDHbu6OgvaJ5Q7X41fwjJuRGF9a6kg5nogqqR+D4cZ1peJgfzK3GNnP9LpYcfczS987/Z9gPmRovdxF07WOT/s2IDlIpKEiG2hVtKfrUmsXiO8w45lrekaNMDO/DujNgGZUKHcJqSCyM7Ud7H7BzkSeBkakeIpnyFBtLX05W7Hl6alUDjJpgbEH3PFcIYHq3tAA5hpE6H+xM0hLW4MivCKDKIPDQhh/BYDsYnRLl7EXB79/mTaTKyx1W+ac4GqZqryL5l6dBdCQc8e+VycptD+CL0xPCIq/MJumx/glcnZXiLyR7TloASm3dlx0HKFJUVTF+MqZmFdiFijY2DXm9Q3Ggf0aD8SqOWvUn17yCE=
